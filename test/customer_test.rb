require 'test_helper'

class CustomerTest < Minitest::Test
  describe 'customer object' do
    before do
      stub_request(:get, 'https://restapi.e-conomic.com/customers/')
        .with(
          headers: {
            'Accept' => '*/*',
            'Accept-Encoding' => 'gzip, deflate',
            'Content-Type' => 'application/json',
            'Host' => 'restapi.e-conomic.com',
            'User-Agent' => 'rest-client/2.0.2 (darwin18.2.0 x86_64) ruby/2.3.1p112',
            'X-Agreementgranttoken' => 'Demo',
            'X-Appsecrettoken' => 'Demo'
          }
        )
        .to_return(status: 200, body: '{"collection":[{"customerNumber":1,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":4388512.50,"dueAmount":4376644.26,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Norway","email":"jo+billing@addwish.com","name":"Addwish test 1547129108481","zip":"1234","vatZone":{"vatZoneNumber":3,"self":"https://restapi.e-conomic.com/vat-zones/3"},"lastUpdated":"2019-01-10T14:05:08Z","contacts":"https://restapi.e-conomic.com/customers/1/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/1/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/1/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/1/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/1","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/1","self":"https://restapi.e-conomic.com/customers/1/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/1/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/1/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/1/invoices/booked","self":"https://restapi.e-conomic.com/customers/1/invoices"},"self":"https://restapi.e-conomic.com/customers/1"},{"customerNumber":2,"currency":"DKK","paymentTerms":{"paymentTermsNumber":2,"self":"https://restapi.e-conomic.com/payment-terms/2"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"city":"KÃ¸benhavn K","country":"Danmark","barred":true,"name":"Demo Name","zip":"1411","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:15:27Z","contacts":"https://restapi.e-conomic.com/customers/2/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/2/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/2/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/2/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/2","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/2","self":"https://restapi.e-conomic.com/customers/2/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/2/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/2/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/2/invoices/booked","self":"https://restapi.e-conomic.com/customers/2/invoices"},"self":"https://restapi.e-conomic.com/customers/2"},{"customerNumber":3,"currency":"DKK","paymentTerms":{"paymentTermsNumber":2,"self":"https://restapi.e-conomic.com/payment-terms/2"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":2312.33,"dueAmount":2312.33,"barred":true,"name":"Demo Name","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:15:22Z","contacts":"https://restapi.e-conomic.com/customers/3/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/3/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/3/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/3/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/3","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/3","self":"https://restapi.e-conomic.com/customers/3/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/3/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/3/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/3/invoices/booked","self":"https://restapi.e-conomic.com/customers/3/invoices"},"self":"https://restapi.e-conomic.com/customers/3"},{"customerNumber":4,"currency":"INR","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"city":"aaaaa","country":"aaaaaa","email":"aaaa@aaa.com","barred":true,"name":"Aaaaa","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:13:17Z","contacts":"https://restapi.e-conomic.com/customers/4/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/4/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/4/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/4/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/4","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/4","self":"https://restapi.e-conomic.com/customers/4/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/4/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/4/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/4/invoices/booked","self":"https://restapi.e-conomic.com/customers/4/invoices"},"self":"https://restapi.e-conomic.com/customers/4"},{"customerNumber":5,"currency":"NGN","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":2,"self":"https://restapi.e-conomic.com/customer-groups/2"},"address":"Test","balance":0.0,"dueAmount":0.00,"barred":true,"name":"Test nbnbnb","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:31:36Z","contacts":"https://restapi.e-conomic.com/customers/5/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/5/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/5/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/5/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/5","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/5","self":"https://restapi.e-conomic.com/customers/5/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/5/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/5/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/5/invoices/booked","self":"https://restapi.e-conomic.com/customers/5/invoices"},"self":"https://restapi.e-conomic.com/customers/5"},{"customerNumber":8,"currency":"INR","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"street","balance":310723.70,"dueAmount":310723.70,"corporateIdentificationNumber":"Test","city":"Delhi","country":"India","creditLimit":100.00,"email":"mail@local.local","name":"Customer 8","zip":"110058","telephoneAndFaxNumber":"123213","website":"www.test.com","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"layout":{"layoutNumber":20,"self":"https://restapi.e-conomic.com/layouts/20"},"lastUpdated":"2018-04-06T09:33:03Z","contacts":"https://restapi.e-conomic.com/customers/8/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/8/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/8/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/8/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/8","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/8","self":"https://restapi.e-conomic.com/customers/8/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/8/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/8/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/8/invoices/booked","self":"https://restapi.e-conomic.com/customers/8/invoices"},"self":"https://restapi.e-conomic.com/customers/8"},{"customerNumber":12,"currency":"INR","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"barred":true,"name":"Test","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:30:14Z","contacts":"https://restapi.e-conomic.com/customers/12/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/12/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/12/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/12/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/12","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/12","self":"https://restapi.e-conomic.com/customers/12/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/12/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/12/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/12/invoices/booked","self":"https://restapi.e-conomic.com/customers/12/invoices"},"self":"https://restapi.e-conomic.com/customers/12"},{"customerNumber":13,"currency":"INR","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"city":"sdasd","country":"asdasd","email":"asdasdas@sadasd.sd","barred":true,"name":"Test","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:30:59Z","contacts":"https://restapi.e-conomic.com/customers/13/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/13/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/13/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/13/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/13","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/13","self":"https://restapi.e-conomic.com/customers/13/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/13/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/13/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/13/invoices/booked","self":"https://restapi.e-conomic.com/customers/13/invoices"},"self":"https://restapi.e-conomic.com/customers/13"},{"customerNumber":14,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Street","balance":25.00,"dueAmount":25.00,"city":"Copenhagen","email":"local@local.local","name":"Customer 14","zip":"2400","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-04-06T09:33:18Z","contacts":"https://restapi.e-conomic.com/customers/14/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/14/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/14/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/14/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/14","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/14","self":"https://restapi.e-conomic.com/customers/14/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/14/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/14/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/14/invoices/booked","self":"https://restapi.e-conomic.com/customers/14/invoices"},"self":"https://restapi.e-conomic.com/customers/14"},{"customerNumber":52,"currency":"INR","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"city":"Test","country":"Test","email":"test@test.com","barred":true,"name":"Test","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:30:37Z","contacts":"https://restapi.e-conomic.com/customers/52/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/52/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/52/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/52/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/52","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/52","self":"https://restapi.e-conomic.com/customers/52/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/52/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/52/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/52/invoices/booked","self":"https://restapi.e-conomic.com/customers/52/invoices"},"self":"https://restapi.e-conomic.com/customers/52"},{"customerNumber":65,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Denmark","email":"jo+billing@addwish.com","name":"Addwish test 1532507479021","zip":"1234","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-08-01T13:57:06Z","contacts":"https://restapi.e-conomic.com/customers/65/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/65/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/65/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/65/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/65","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/65","self":"https://restapi.e-conomic.com/customers/65/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/65/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/65/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/65/invoices/booked","self":"https://restapi.e-conomic.com/customers/65/invoices"},"self":"https://restapi.e-conomic.com/customers/65"},{"customerNumber":66,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Denmark","email":"jo+billing@addwish.com","name":"Addwish test 1532507479021","zip":"1234","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-08-01T13:57:25Z","contacts":"https://restapi.e-conomic.com/customers/66/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/66/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/66/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/66/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/66","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/66","self":"https://restapi.e-conomic.com/customers/66/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/66/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/66/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/66/invoices/booked","self":"https://restapi.e-conomic.com/customers/66/invoices"},"self":"https://restapi.e-conomic.com/customers/66"},{"customerNumber":67,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Denmark","email":"jo+billing@addwish.com","name":"Addwish test 1532507479021","zip":"1234","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-08-02T07:37:31Z","contacts":"https://restapi.e-conomic.com/customers/67/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/67/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/67/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/67/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/67","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/67","self":"https://restapi.e-conomic.com/customers/67/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/67/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/67/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/67/invoices/booked","self":"https://restapi.e-conomic.com/customers/67/invoices"},"self":"https://restapi.e-conomic.com/customers/67"},{"customerNumber":70,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Denmark","email":"jo+billing@addwish.com","name":"Addwish test 1532507479021","zip":"1234","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-08-02T10:00:39Z","contacts":"https://restapi.e-conomic.com/customers/70/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/70/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/70/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/70/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/70","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/70","self":"https://restapi.e-conomic.com/customers/70/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/70/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/70/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/70/invoices/booked","self":"https://restapi.e-conomic.com/customers/70/invoices"},"self":"https://restapi.e-conomic.com/customers/70"},{"customerNumber":71,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Denmark","email":"jo+billing@addwish.com","name":"Addwish test 1532507479021","zip":"1234","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-08-02T10:14:43Z","contacts":"https://restapi.e-conomic.com/customers/71/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/71/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/71/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/71/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/71","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/71","self":"https://restapi.e-conomic.com/customers/71/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/71/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/71/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/71/invoices/booked","self":"https://restapi.e-conomic.com/customers/71/invoices"},"self":"https://restapi.e-conomic.com/customers/71"},{"customerNumber":100,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Denmark","email":"jo+billing@addwish.com","name":"Addwish test 1532507479021","zip":"1234","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-08-01T10:47:39Z","contacts":"https://restapi.e-conomic.com/customers/100/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/100/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/100/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/100/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/100","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/100","self":"https://restapi.e-conomic.com/customers/100/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/100/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/100/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/100/invoices/booked","self":"https://restapi.e-conomic.com/customers/100/invoices"},"self":"https://restapi.e-conomic.com/customers/100"},{"customerNumber":101,"currency":"DKK","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"address":"Vejen 1","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"DK12345678","city":"Storeby","country":"Denmark","email":"jo+billing@addwish.com","name":"Addwish test 1532507479021","zip":"1234","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2018-08-01T10:49:08Z","contacts":"https://restapi.e-conomic.com/customers/101/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/101/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/101/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/101/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/101","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/101","self":"https://restapi.e-conomic.com/customers/101/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/101/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/101/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/101/invoices/booked","self":"https://restapi.e-conomic.com/customers/101/invoices"},"self":"https://restapi.e-conomic.com/customers/101"},{"customerNumber":111,"currency":"INR","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"city":"asdsadsadsa","country":"sadasdasd","email":"asdasd@sdas.as","barred":true,"name":"sadsad","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:28:41Z","contacts":"https://restapi.e-conomic.com/customers/111/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/111/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/111/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/111/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/111","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/111","self":"https://restapi.e-conomic.com/customers/111/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/111/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/111/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/111/invoices/booked","self":"https://restapi.e-conomic.com/customers/111/invoices"},"self":"https://restapi.e-conomic.com/customers/111"},{"customerNumber":123,"currency":"INR","paymentTerms":{"paymentTermsNumber":2,"self":"https://restapi.e-conomic.com/payment-terms/2"},"customerGroup":{"customerGroupNumber":2,"self":"https://restapi.e-conomic.com/customer-groups/2"},"address":"C-2 147 A New delhi","balance":0.0,"dueAmount":0.00,"corporateIdentificationNumber":"INV","city":"New Delhi","country":"India","email":"devrai38@gmail.com","barred":true,"name":"dev","zip":"3454555","telephoneAndFaxNumber":"988964873748","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:15:29Z","contacts":"https://restapi.e-conomic.com/customers/123/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/123/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/123/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/123/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/123","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/123","self":"https://restapi.e-conomic.com/customers/123/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/123/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/123/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/123/invoices/booked","self":"https://restapi.e-conomic.com/customers/123/invoices"},"self":"https://restapi.e-conomic.com/customers/123"},{"customerNumber":666,"currency":"DKK","paymentTerms":{"paymentTermsNumber":2,"self":"https://restapi.e-conomic.com/payment-terms/2"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"barred":true,"name":"Veselin Corp","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:33:42Z","contacts":"https://restapi.e-conomic.com/customers/666/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/666/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/666/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/666/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/666","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/666","self":"https://restapi.e-conomic.com/customers/666/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/666/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/666/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/666/invoices/booked","self":"https://restapi.e-conomic.com/customers/666/invoices"},"self":"https://restapi.e-conomic.com/customers/666"}],"pagination":{"maxPageSizeAllowed":1000,"skipPages":0,"pageSize":20,"results":3684,"resultsWithoutFilter":3684,"firstPage":"https://restapi.e-conomic.com/customers/?skippages=0&pagesize=20","nextPage":"https://restapi.e-conomic.com/customers/?skippages=1&pagesize=20","lastPage":"https://restapi.e-conomic.com/customers/?skippages=184&pagesize=20"},"metaData":{"create":{"description":"Create a new customer","href":"https://restapi.e-conomic.com/customers/","httpMethod":"post"}},"self":"https://restapi.e-conomic.com/customers/"}', headers: {})
      stub_request(:get, 'https://restapi.e-conomic.com/customers/4')
        .with(
          headers: {
            'Accept' => '*/*',
            'Accept-Encoding' => 'gzip, deflate',
            'Content-Type' => 'application/json',
            'Host' => 'restapi.e-conomic.com',
            'User-Agent' => 'rest-client/2.0.2 (darwin18.2.0 x86_64) ruby/2.3.1p112',
            'X-Agreementgranttoken' => 'Demo',
            'X-Appsecrettoken' => 'Demo'
          }
        ).to_return(status: 200, body: '{"customerNumber":4,"currency":"INR","paymentTerms":{"paymentTermsNumber":1,"self":"https://restapi.e-conomic.com/payment-terms/1"},"customerGroup":{"customerGroupNumber":1,"self":"https://restapi.e-conomic.com/customer-groups/1"},"balance":0.0,"dueAmount":0.00,"city":"aaaaa","country":"aaaaaa","email":"aaaa@aaa.com","barred":true,"name":"Aaaaa","vatZone":{"vatZoneNumber":1,"self":"https://restapi.e-conomic.com/vat-zones/1"},"lastUpdated":"2017-11-28T11:13:17Z","contacts":"https://restapi.e-conomic.com/customers/4/contacts","templates":{"invoice":"https://restapi.e-conomic.com/customers/4/templates/invoice","invoiceLine":"https://restapi.e-conomic.com/customers/4/templates/invoiceline","self":"https://restapi.e-conomic.com/customers/4/templates"},"totals":{"drafts":"https://restapi.e-conomic.com/invoices/totals/drafts/customers/4","booked":"https://restapi.e-conomic.com/invoices/totals/booked/customers/4","self":"https://restapi.e-conomic.com/customers/4/totals"},"deliveryLocations":"https://restapi.e-conomic.com/customers/4/delivery-locations","invoices":{"drafts":"https://restapi.e-conomic.com/customers/4/invoices/drafts","booked":"https://restapi.e-conomic.com/customers/4/invoices/booked","self":"https://restapi.e-conomic.com/customers/4/invoices"},"metaData":{"delete":{"description":"Delete this customer.","href":"https://restapi.e-conomic.com/customers/4","httpMethod":"delete"},"replace":{"description":"Replace this customer.","href":"https://restapi.e-conomic.com/customers/4","httpMethod":"put"}},"self":"https://restapi.e-conomic.com/customers/4"}', headers: {})
    end
    it 'gets all' do
      customers = Economic::CustomerRepo.all

      assert_equal 4, customers[3].to_h['customerNumber']
    end

    it 'finds based on customer number' do
      customer = Economic::CustomerRepo.find(4)

      assert_equal 'aaaa@aaa.com', customer.to_h['email']
    end
  end
end
